# チケット #003: DTO層の実装

## ステータス
- [x] 完了

## 機能概要
リクエスト/レスポンス用のDTOクラス作成。
APIの入出力データ構造を定義し、エンティティとの分離、バリデーション、データ変換を実現。

## 実装ファイル

### backend/src/main/java/com/accounting/app/dto/common/
- [x] `ApiResponse.java` - API共通レスポンス
- [x] `PageResponse.java` - ページネーションレスポンス

### backend/src/main/java/com/accounting/app/dto/request/
- [x] `AccountRequest.java` - 勘定科目リクエスト
- [x] `JournalRequest.java` - 仕訳リクエスト
- [x] `JournalDetailRequest.java` - 仕訳明細リクエスト

### backend/src/main/java/com/accounting/app/dto/response/
- [x] `AccountResponse.java` - 勘定科目レスポンス

## 主要な実装内容

### ApiResponse<T>
共通のAPIレスポンス形式を提供：
```json
{
  "success": true,
  "data": { ... },
  "error": null
}
```
または
```json
{
  "success": false,
  "data": null,
  "error": {
    "code": "ERROR_CODE",
    "message": "エラーメッセージ",
    "details": { ... }
  }
}
```

**主要メソッド**:
- `static <T> ApiResponse<T> success(T data)` - 成功レスポンス生成
- `static <T> ApiResponse<T> error(String code, String message)` - エラーレスポンス生成

### PageResponse<T>
ページネーション用のレスポンス形式：
```json
{
  "items": [ ... ],
  "page": 0,
  "pageSize": 20,
  "totalItems": 100,
  "totalPages": 5,
  "hasNext": true,
  "hasPrevious": false
}
```

**主要メソッド**:
- `static <T> PageResponse<T> from(Page<T> page)` - Spring Data PageからPageResponse変換

### リクエストDTO
バリデーションアノテーションを使用：
- `@NotNull` - null不可
- `@NotBlank` - 空文字不可
- `@Size(max = n)` - 最大文字数
- `@Positive` - 正の数
- `@Valid` - ネストしたオブジェクトのバリデーション

**AccountRequest例**:
- `code`: String (必須、最大50文字)
- `name`: String (必須、最大100文字)
- `accountType`: String (必須)
- `isSystem`: Boolean (デフォルト: false)

### レスポンスDTO
エンティティからDTOへの変換メソッドを提供：
- `static AccountResponse from(Account account)` - Entityから変換

## 備考
- DTOはエンティティの詳細を隠蔽し、APIインターフェースを安定化
- バリデーションルールはリクエストDTOに集約
- レスポンスDTOはエンティティの必要な情報のみを公開
- 今後、必要に応じて追加のDTOクラスを作成予定
