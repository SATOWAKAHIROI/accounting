# 画面設計書

## 目次

1. [画面一覧](#1-画面一覧)
2. [画面遷移図](#2-画面遷移図)
3. [認証関連画面](#3-認証関連画面)
   - [ログイン画面](#3-1-ログイン画面)
   - [ユーザー登録画面](#3-2-ユーザー登録画面)
4. [ダッシュボード](#4-ダッシュボード)
5. [マスタ管理画面](#5-マスタ管理画面)
   - [勘定科目マスタ](#5-1-勘定科目マスタ)
   - [補助科目マスタ](#5-2-補助科目マスタ)
   - [税区分マスタ](#5-3-税区分マスタ)
   - [取引先マスタ](#5-4-取引先マスタ)
   - [品目マスタ](#5-5-品目マスタ)
6. [トランザクション画面](#6-トランザクション画面)
   - [仕訳入力画面](#6-1-仕訳入力画面)
   - [請求書作成画面](#6-2-請求書作成画面)
   - [入金登録画面](#6-3-入金登録画面)
7. [レポート画面](#7-レポート画面)
   - [総勘定元帳](#7-1-総勘定元帳)
   - [試算表](#7-2-試算表)
   - [損益計算書](#7-3-損益計算書)
   - [貸借対照表](#7-4-貸借対照表)
8. [設定画面](#8-設定画面)
   - [会計期間管理](#8-1-会計期間管理)
   - [会社設定](#8-2-会社設定)
   - [ユーザー管理](#8-3-ユーザー管理)

---

## 1. 画面一覧

| No | 画面名 | URL | 説明 | 権限 |
|----|--------|-----|------|------|
| 1 | ログイン | `/login` | ユーザーログイン画面 | 公開 |
| 2 | ユーザー登録 | `/register` | 新規ユーザー登録画面 | 公開 |
| 3 | ダッシュボード | `/` | 会計データの概要表示 | 認証済み |
| 4 | 勘定科目一覧 | `/masters/accounts` | 勘定科目マスタ一覧 | viewer以上 |
| 5 | 勘定科目登録 | `/masters/accounts/new` | 勘定科目新規登録 | accountant以上 |
| 6 | 勘定科目編集 | `/masters/accounts/:id/edit` | 勘定科目編集 | accountant以上 |
| 7 | 補助科目一覧 | `/masters/sub-accounts` | 補助科目マスタ一覧 | viewer以上 |
| 8 | 税区分一覧 | `/masters/tax-types` | 税区分マスタ一覧 | viewer以上 |
| 9 | 取引先一覧 | `/masters/partners` | 取引先マスタ一覧 | viewer以上 |
| 10 | 取引先登録 | `/masters/partners/new` | 取引先新規登録 | accountant以上 |
| 11 | 品目一覧 | `/masters/items` | 品目マスタ一覧 | viewer以上 |
| 12 | 品目登録 | `/masters/items/new` | 品目新規登録 | accountant以上 |
| 13 | 仕訳一覧 | `/journals` | 仕訳一覧表示 | viewer以上 |
| 14 | 仕訳入力 | `/journals/new` | 仕訳新規入力 | accountant以上 |
| 15 | 仕訳編集 | `/journals/:id/edit` | 仕訳編集 | accountant以上 |
| 16 | 請求書一覧 | `/invoices` | 請求書一覧表示 | viewer以上 |
| 17 | 請求書作成 | `/invoices/new` | 請求書新規作成 | accountant以上 |
| 18 | 請求書詳細 | `/invoices/:id` | 請求書詳細表示 | viewer以上 |
| 19 | 入金一覧 | `/payments` | 入金一覧表示 | viewer以上 |
| 20 | 入金登録 | `/payments/new` | 入金新規登録 | accountant以上 |
| 21 | 総勘定元帳 | `/reports/general-ledger` | 総勘定元帳レポート | viewer以上 |
| 22 | 試算表 | `/reports/trial-balance` | 試算表レポート | viewer以上 |
| 23 | 損益計算書 | `/reports/profit-loss` | 損益計算書レポート | viewer以上 |
| 24 | 貸借対照表 | `/reports/balance-sheet` | 貸借対照表レポート | viewer以上 |
| 25 | 会計期間管理 | `/settings/fiscal-periods` | 会計期間の作成・管理 | admin |
| 26 | 会社設定 | `/settings/company` | 会社情報の設定 | admin |
| 27 | ユーザー管理 | `/settings/users` | ユーザーの招待・役割管理 | admin |

---

## 2. 画面遷移図

```
┌─────────────┐
│  ログイン    │
│  /login     │
└──────┬──────┘
       │
       ▼
┌─────────────────────────────────────────┐
│          ダッシュボード (/)              │
│  - 当月の収支サマリー                    │
│  - 最近の仕訳                           │
│  - 未払い請求書                         │
└───┬─────────────────────────────────┬───┘
    │                                 │
    ▼                                 ▼
┌─────────────┐                  ┌─────────────┐
│ マスタ管理   │                  │ トランザ    │
│             │                  │ クション    │
├─────────────┤                  ├─────────────┤
│- 勘定科目   │                  │- 仕訳入力   │
│- 補助科目   │                  │- 請求書作成 │
│- 税区分     │                  │- 入金登録   │
│- 取引先     │                  └─────────────┘
│- 品目       │                         │
└─────────────┘                         │
    │                                  │
    │                                  ▼
    │                          ┌─────────────┐
    │                          │ レポート    │
    │                          ├─────────────┤
    │                          │- 総勘定元帳 │
    │                          │- 試算表     │
    │                          │- 損益計算書 │
    │                          │- 貸借対照表 │
    │                          └─────────────┘
    │
    ▼
┌─────────────┐
│ 設定        │
├─────────────┤
│- 会計期間   │
│- 会社設定   │
│- ユーザー管理│
└─────────────┘
```

---

## 3. 認証関連画面

### 3-1. ログイン画面

**URL**: `/login`

**説明**: ユーザーがメールアドレスとパスワードでログインする画面

**レイアウト**:
```
┌──────────────────────────────────────────┐
│                                          │
│         会計ソフト ロゴ                   │
│                                          │
│  ┌────────────────────────────────────┐  │
│  │  ログイン                           │  │
│  ├────────────────────────────────────┤  │
│  │                                    │  │
│  │  メールアドレス                     │  │
│  │  [____________________________]    │  │
│  │                                    │  │
│  │  パスワード                         │  │
│  │  [____________________________]    │  │
│  │                                    │  │
│  │  □ ログイン状態を保持する          │  │
│  │                                    │  │
│  │  [      ログイン      ]            │  │
│  │                                    │  │
│  │  パスワードをお忘れの方はこちら      │  │
│  │  アカウントをお持ちでない方はこちら  │  │
│  │                                    │  │
│  └────────────────────────────────────┘  │
│                                          │
└──────────────────────────────────────────┘
```

**入力項目**:
| 項目 | 型 | 必須 | バリデーション |
|------|-----|------|---------------|
| メールアドレス | text | Yes | メール形式 |
| パスワード | password | Yes | 1文字以上 |
| ログイン状態を保持 | checkbox | No | - |

**アクション**:
- **ログインボタン**: `/api/auth/login` にPOST、成功時にダッシュボードへ遷移
- **パスワードをお忘れの方**: パスワードリセット画面へ遷移（将来実装）
- **アカウントをお持ちでない方**: ユーザー登録画面へ遷移

**エラー表示**:
- メールアドレスまたはパスワードが正しくない場合、エラーメッセージを表示

---

### 3-2. ユーザー登録画面

**URL**: `/register`

**説明**: 新規ユーザーがアカウントを作成する画面

**レイアウト**:
```
┌──────────────────────────────────────────┐
│  ユーザー登録                             │
├──────────────────────────────────────────┤
│                                          │
│  ユーザー名                               │
│  [____________________________]          │
│                                          │
│  メールアドレス                           │
│  [____________________________]          │
│                                          │
│  パスワード                               │
│  [____________________________]          │
│  ※ 最低8文字、英数字記号を含む           │
│                                          │
│  パスワード（確認）                       │
│  [____________________________]          │
│                                          │
│  [      登録する      ]                  │
│                                          │
│  既にアカウントをお持ちの方はこちら        │
│                                          │
└──────────────────────────────────────────┘
```

**入力項目**:
| 項目 | 型 | 必須 | バリデーション |
|------|-----|------|---------------|
| ユーザー名 | text | Yes | 最大100文字 |
| メールアドレス | text | Yes | メール形式、一意 |
| パスワード | password | Yes | 最低8文字、英数字記号含む |
| パスワード（確認） | password | Yes | パスワードと一致 |

**アクション**:
- **登録するボタン**: `/api/auth/register` にPOST、成功時にダッシュボードへ遷移
- **既にアカウントをお持ちの方**: ログイン画面へ遷移

---

## 4. ダッシュボード

**URL**: `/`

**説明**: ログイン後の最初の画面。会計データの概要を表示

**レイアウト**:
```
┌─────────────────────────────────────────────────────────┐
│  ヘッダー [会社名] [ユーザー名] [ログアウト]              │
├─────────────────────────────────────────────────────────┤
│  サイドバー       │  メインコンテンツ                    │
│                  │                                      │
│  ■ ダッシュボード │  ダッシュボード                      │
│  ■ マスタ管理    │                                      │
│    - 勘定科目    │  ┌────────────────────────────────┐  │
│    - 取引先      │  │ 当月の収支サマリー               │  │
│    - 品目        │  │ 収益: 10,000,000円              │  │
│  ■ 仕訳入力      │  │ 費用:  6,000,000円              │  │
│  ■ 請求書        │  │ 利益:  4,000,000円              │  │
│  ■ レポート      │  └────────────────────────────────┘  │
│    - 総勘定元帳  │                                      │
│    - 試算表      │  ┌────────────────────────────────┐  │
│    - P/L         │  │ 最近の仕訳 (5件)                │  │
│    - B/S         │  │ 2025-01-15 売上計上 110,000円   │  │
│  ■ 設定          │  │ 2025-01-14 備品購入  50,000円   │  │
│    - 会計期間    │  │ ...                             │  │
│    - 会社設定    │  └────────────────────────────────┘  │
│    - ユーザー    │                                      │
│                  │  ┌────────────────────────────────┐  │
│                  │  │ 未払い請求書 (3件)              │  │
│                  │  │ INV-001 株式会社ABC 620,000円   │  │
│                  │  │ ...                             │  │
│                  │  └────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
```

**表示項目**:
1. **当月の収支サマリー**
   - 収益合計
   - 費用合計
   - 利益（収益 - 費用）

2. **最近の仕訳（5件）**
   - 日付、摘要、金額

3. **未払い請求書（最大10件）**
   - 請求書番号、取引先、金額

**API連携**:
- `GET /api/reports/profit-loss?fiscalPeriodId=X&startDate=...&endDate=...` （当月収支）
- `GET /api/journals?limit=5&sort=journalDate&order=desc` （最近の仕訳）
- `GET /api/invoices?status=issued&limit=10` （未払い請求書）

---

## 5. マスタ管理画面

### 5-1. 勘定科目マスタ

**URL**: `/masters/accounts`

**説明**: 勘定科目の一覧表示、検索、新規登録、編集、削除

**レイアウト（一覧）**:
```
┌─────────────────────────────────────────────────────────┐
│  勘定科目マスタ                                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  [新規登録]  検索: [________]  区分: [全て▼]  [検索]   │
│                                                         │
│  ┌───────────────────────────────────────────────────┐  │
│  │コード │ 勘定科目名  │ 区分   │ 表示順 │ 操作    │  │
│  ├───────────────────────────────────────────────────┤  │
│  │ 101  │ 現金       │ 資産   │ 1     │[編][削] │  │
│  │ 102  │ 普通預金   │ 資産   │ 2     │[編][削] │  │
│  │ 103  │ 売掛金     │ 資産   │ 3     │[編][削] │  │
│  │ 201  │ 買掛金     │ 負債   │ 10    │[編][削] │  │
│  │ 301  │ 資本金     │ 純資産 │ 20    │[編][削] │  │
│  │ 401  │ 売上高     │ 収益   │ 30    │[編][削] │  │
│  │ 501  │ 売上原価   │ 費用   │ 40    │[編][削] │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  [< 前へ] [1] [2] [3] [次へ >]                          │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**機能**:
- **検索**: 勘定科目コード・名称の部分一致検索
- **区分フィルタ**: 資産/負債/純資産/収益/費用で絞り込み
- **新規登録**: `/masters/accounts/new` へ遷移
- **編集**: `/masters/accounts/:id/edit` へ遷移
- **削除**: 確認ダイアログ後、削除API呼び出し

**レイアウト（新規登録/編集）**:
```
┌─────────────────────────────────────────────────────────┐
│  勘定科目 - 新規登録                                     │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  勘定科目コード *                                        │
│  [___________]                                          │
│                                                         │
│  勘定科目名 *                                            │
│  [_____________________________]                        │
│                                                         │
│  勘定科目区分 *                                          │
│  (○) 資産  ( ) 負債  ( ) 純資産  ( ) 収益  ( ) 費用    │
│                                                         │
│  表示順                                                  │
│  [___________]                                          │
│                                                         │
│  □ 有効                                                 │
│                                                         │
│  [キャンセル]  [登録]                                    │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**入力項目**:
| 項目 | 型 | 必須 | バリデーション |
|------|-----|------|---------------|
| 勘定科目コード | text | Yes | 最大20文字、一意 |
| 勘定科目名 | text | Yes | 最大100文字 |
| 勘定科目区分 | radio | Yes | asset/liability/equity/revenue/expense |
| 表示順 | number | No | 0以上 |
| 有効 | checkbox | No | デフォルト: true |

**アクション**:
- **登録ボタン**: `POST /api/accounts`、成功時に一覧へ遷移
- **更新ボタン**: `PUT /api/accounts/:id`、成功時に一覧へ遷移
- **キャンセルボタン**: 一覧へ遷移

---

### 5-2. 補助科目マスタ

**URL**: `/masters/sub-accounts`

**説明**: 補助科目の一覧表示、親勘定科目ごとの管理

**レイアウト**:
```
┌─────────────────────────────────────────────────────────┐
│  補助科目マスタ                                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  勘定科目: [現金 (101)▼]  [新規登録]                    │
│                                                         │
│  ┌───────────────────────────────────────────────────┐  │
│  │コード    │ 補助科目名       │ 表示順 │ 操作    │  │
│  ├───────────────────────────────────────────────────┤  │
│  │ 101-01  │ 現金（本社）     │ 1     │[編][削] │  │
│  │ 101-02  │ 現金（営業所）   │ 2     │[編][削] │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

### 5-3. 税区分マスタ

**URL**: `/masters/tax-types`

**説明**: 税区分の一覧表示、税率の履歴管理

**レイアウト**:
```
┌─────────────────────────────────────────────────────────┐
│  税区分マスタ                                            │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  [新規登録]                                              │
│                                                         │
│  ┌───────────────────────────────────────────────────┐  │
│  │コード │ 税区分名         │税率│適用開始│操作    │  │
│  ├───────────────────────────────────────────────────┤  │
│  │ TAX10│ 課税売上（10%）  │10% │2019-10│[編][削]│  │
│  │ TAX08│ 課税売上（8%）   │8%  │2014-04│[編][削]│  │
│  │ TAX00│ 非課税           │0%  │-      │[編][削]│  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

### 5-4. 取引先マスタ

**URL**: `/masters/partners`

**説明**: 取引先の一覧表示、新規登録、編集

**レイアウト（新規登録/編集）**:
```
┌─────────────────────────────────────────────────────────┐
│  取引先 - 新規登録                                       │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  取引先コード *                                          │
│  [___________]                                          │
│                                                         │
│  取引先名 *                                              │
│  [_____________________________]                        │
│                                                         │
│  郵便番号                                                │
│  [___-____]                                             │
│                                                         │
│  住所                                                    │
│  [_____________________________]                        │
│                                                         │
│  電話番号                                                │
│  [___________]                                          │
│                                                         │
│  メールアドレス                                          │
│  [_____________________________]                        │
│                                                         │
│  区分                                                    │
│  □ 得意先  □ 仕入先                                     │
│                                                         │
│  □ 有効                                                 │
│                                                         │
│  [キャンセル]  [登録]                                    │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

### 5-5. 品目マスタ

**URL**: `/masters/items`

**説明**: 品目（商品・サービス）の一覧表示、新規登録、編集

**レイアウト（新規登録/編集）**:
```
┌─────────────────────────────────────────────────────────┐
│  品目 - 新規登録                                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  品目コード *                                            │
│  [___________]                                          │
│                                                         │
│  品目名 *                                                │
│  [_____________________________]                        │
│                                                         │
│  品目区分 *                                              │
│  (○) 商品  ( ) サービス                                 │
│                                                         │
│  単価                                                    │
│  [___________] 円                                       │
│                                                         │
│  単位                                                    │
│  [___________] (例: 個、時間、台)                       │
│                                                         │
│  □ 有効                                                 │
│                                                         │
│  [キャンセル]  [登録]                                    │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 6. トランザクション画面

### 6-1. 仕訳入力画面

**URL**: `/journals/new`

**説明**: 仕訳を新規入力する画面。複式簿記の借方・貸方を同時入力

**レイアウト**:
```
┌─────────────────────────────────────────────────────────┐
│  仕訳入力                                                │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  会計期間: [2025年度▼]  仕訳日付: [2025-01-15]         │
│                                                         │
│  摘要: [_______________________]                        │
│                                                         │
│  ┌───────────────────────────────────────────────────┐  │
│  │借方                                                │  │
│  ├───────────────────────────────────────────────────┤  │
│  │勘定科目  │補助│取引先  │税区分│金額    │摘要    │  │
│  ├───────────────────────────────────────────────────┤  │
│  │[普通預金▼]│[-▼]│[ABC▼]│[-▼]│110,000│売掛金入│  │
│  │[+行追加]                                           │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  ┌───────────────────────────────────────────────────┐  │
│  │貸方                                                │  │
│  ├───────────────────────────────────────────────────┤  │
│  │勘定科目  │補助│取引先  │税区分│金額    │摘要    │  │
│  ├───────────────────────────────────────────────────┤  │
│  │[売上高▼]│[-▼]│[ABC▼]│[10%▼]│100,000│商品売上│  │
│  │[仮受消費▼]│[-▼]│[-▼] │[10%▼]│ 10,000│消費税  │  │
│  │[+行追加]                                           │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  借方合計: 110,000円  貸方合計: 110,000円  差額: 0円   │
│                                                         │
│  [リアルタイムチェック]  [キャンセル]  [登録]           │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**入力項目**:
| 項目 | 型 | 必須 | バリデーション |
|------|-----|------|---------------|
| 会計期間 | select | Yes | 存在する会計期間 |
| 仕訳日付 | date | Yes | 会計期間内の日付 |
| 摘要 | text | No | 最大500文字 |
| 明細行（複数） | - | Yes | 最低2行（借方1、貸方1） |
| - 勘定科目 | select | Yes | マスタから選択 |
| - 補助科目 | select | No | マスタから選択 |
| - 取引先 | select | No | マスタから選択 |
| - 税区分 | select | No | マスタから選択 |
| - 金額 | number | Yes | 0より大きい |
| - 摘要 | text | No | 最大500文字 |

**ビジネスルール**:
1. 借方合計 = 貸方合計（必須）
2. 明細行は最低2行（借方1、貸方1）
3. 会計期間が締め済みの場合は入力不可

**アクション**:
- **リアルタイムチェックボタン**: `POST /api/journals/validate` で借方貸方の一致チェック
- **登録ボタン**: `POST /api/journals`、成功時に仕訳一覧へ遷移
- **キャンセルボタン**: 仕訳一覧へ遷移

---

### 6-2. 請求書作成画面

**URL**: `/invoices/new`

**説明**: 請求書を作成し、明細を入力する画面

**レイアウト**:
```
┌─────────────────────────────────────────────────────────┐
│  請求書作成                                              │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  取引先 *: [株式会社ABC商事▼]                           │
│                                                         │
│  請求日 *: [2025-01-15]  支払期限 *: [2025-02-15]      │
│                                                         │
│  ┌───────────────────────────────────────────────────┐  │
│  │明細                                                │  │
│  ├───────────────────────────────────────────────────┤  │
│  │No│品目        │説明      │数量│単価    │金額    │  │
│  ├───────────────────────────────────────────────────┤  │
│  │1 │[Web制作▼]  │[____]   │1  │500,000│500,000│  │
│  │2 │[保守サポ▼] │[____]   │12 │ 10,000│120,000│  │
│  │[+行追加]                                           │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  小計:         620,000円                                │
│  消費税(10%):   62,000円                                │
│  合計:         682,000円                                │
│                                                         │
│  備考:                                                  │
│  [_____________________________]                        │
│                                                         │
│  [キャンセル]  [下書き保存]  [発行]                     │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**入力項目**:
| 項目 | 型 | 必須 | バリデーション |
|------|-----|------|---------------|
| 取引先 | select | Yes | マスタから選択 |
| 請求日 | date | Yes | - |
| 支払期限 | date | Yes | 請求日以降 |
| 明細行（複数） | - | Yes | 最低1行 |
| - 品目 | select | Yes | マスタから選択 |
| - 説明 | text | No | 最大500文字 |
| - 数量 | number | Yes | 0より大きい |
| - 単価 | number | Yes | 0以上 |
| 備考 | textarea | No | 最大500文字 |

**自動計算**:
- 各行の金額 = 数量 × 単価
- 小計 = 全明細行の金額合計
- 消費税額 = 小計 × 税率
- 合計金額 = 小計 + 消費税額

**アクション**:
- **下書き保存ボタン**: `POST /api/invoices` (status=draft)
- **発行ボタン**: `POST /api/invoices` (status=issued)、PDF生成
- **キャンセルボタン**: 請求書一覧へ遷移

---

### 6-3. 入金登録画面

**URL**: `/payments/new`

**説明**: 請求書に対する入金を登録する画面

**レイアウト**:
```
┌─────────────────────────────────────────────────────────┐
│  入金登録                                                │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  請求書 *: [INV-20250115-001 (株式会社ABC) 682,000円▼] │
│                                                         │
│  入金日 *: [2025-02-10]                                 │
│                                                         │
│  入金額 *: [682,000] 円                                 │
│                                                         │
│  入金方法 *:                                             │
│  (○) 銀行振込  ( ) 現金  ( ) クレジットカード  ( ) その他│
│                                                         │
│  備考:                                                  │
│  [_____________________________]                        │
│                                                         │
│  [キャンセル]  [登録]                                    │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**入力項目**:
| 項目 | 型 | 必須 | バリデーション |
|------|-----|------|---------------|
| 請求書 | select | Yes | 未払い請求書から選択 |
| 入金日 | date | Yes | - |
| 入金額 | number | Yes | 0より大きい |
| 入金方法 | radio | Yes | bank_transfer/cash/credit_card/other |
| 備考 | textarea | No | 最大500文字 |

**アクション**:
- **登録ボタン**: `POST /api/payments`、成功時に入金一覧へ遷移

---

## 7. レポート画面

### 7-1. 総勘定元帳

**URL**: `/reports/general-ledger`

**説明**: 指定した勘定科目の取引履歴を表示

**レイアウト**:
```
┌─────────────────────────────────────────────────────────┐
│  総勘定元帳                                              │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  会計期間: [2025年度▼]                                  │
│  勘定科目: [普通預金▼]  補助科目: [すべて▼]            │
│  期間: [2025-01-01] ～ [2025-12-31]                    │
│  [表示]  [PDF出力]  [Excel出力]                         │
│                                                         │
│  期首残高: 1,000,000円                                  │
│                                                         │
│  ┌───────────────────────────────────────────────────┐  │
│  │日付   │伝票No│摘要      │取引先│借方   │貸方│残高│  │
│  ├───────────────────────────────────────────────────┤  │
│  │01/15  │J-001│売掛金入金│ABC  │110,000│-  │1,110│  │
│  │01/20  │J-002│事務用品  │オフ │-      │5,0│1,105│  │
│  │...                                                 │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  期末残高: 1,105,000円                                  │
│  借方合計: 110,000円  貸方合計: 5,000円                 │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**API連携**:
- `GET /api/reports/general-ledger?fiscalPeriodId=X&accountId=Y&startDate=...&endDate=...`
- `GET /api/reports/general-ledger/pdf?...`
- `GET /api/reports/general-ledger/excel?...`

---

### 7-2. 試算表

**URL**: `/reports/trial-balance`

**説明**: 全勘定科目の残高を一覧表示

**レイアウト**:
```
┌─────────────────────────────────────────────────────────┐
│  試算表                                                  │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  会計期間: [2025年度▼]  基準日: [2025-06-30]           │
│  [表示]  [PDF出力]  [Excel出力]                         │
│                                                         │
│  ┌───────────────────────────────────────────────────┐  │
│  │コード│勘定科目  │区分  │借方残高│貸方残高│差引残高│  │
│  ├───────────────────────────────────────────────────┤  │
│  │101  │現金      │資産  │500,000│-      │500,000│  │
│  │102  │普通預金  │資産  │1,105,0│-      │1,105,0│  │
│  │201  │買掛金    │負債  │-      │300,000│-300,00│  │
│  │401  │売上高    │収益  │-      │2,000,0│-2,000,│  │
│  │...                                                 │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  借方合計: 5,000,000円  貸方合計: 5,000,000円           │
│  差引: 0円 (一致)                                       │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

### 7-3. 損益計算書

**URL**: `/reports/profit-loss`

**説明**: 収益と費用を集計し、利益を計算

**レイアウト**:
```
┌─────────────────────────────────────────────────────────┐
│  損益計算書 (P/L)                                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  会計期間: [2025年度▼]                                  │
│  期間: [2025-01-01] ～ [2025-12-31]                    │
│  [表示]  [PDF出力]  [Excel出力]                         │
│                                                         │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 収益                                               │  │
│  │   売上高                          10,000,000円    │  │
│  │                                                    │  │
│  │ 売上原価                                           │  │
│  │   売上原価                         6,000,000円    │  │
│  │ 売上総利益                         4,000,000円    │  │
│  │                                                    │  │
│  │ 販売費及び一般管理費                               │  │
│  │   給料手当                         2,000,000円    │  │
│  │   地代家賃                           500,000円    │  │
│  │   計                               2,500,000円    │  │
│  │ 営業利益                           1,500,000円    │  │
│  │                                                    │  │
│  │ 営業外収益                                         │  │
│  │   受取利息                            10,000円    │  │
│  │ 営業外費用                                         │  │
│  │   支払利息                             5,000円    │  │
│  │ 経常利益                           1,505,000円    │  │
│  │                                                    │  │
│  │ 当期純利益                         1,505,000円    │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

### 7-4. 貸借対照表

**URL**: `/reports/balance-sheet`

**説明**: 資産、負債、純資産を表示

**レイアウト**:
```
┌─────────────────────────────────────────────────────────┐
│  貸借対照表 (B/S)                                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  会計期間: [2025年度▼]  基準日: [2025-12-31]           │
│  [表示]  [PDF出力]  [Excel出力]                         │
│                                                         │
│  ┌──────────────────┬──────────────────────────────┐  │
│  │ 資産の部         │ 負債の部                     │  │
│  ├──────────────────┼──────────────────────────────┤  │
│  │ 流動資産         │ 流動負債                     │  │
│  │  現金  500,000   │  買掛金  800,000             │  │
│  │  普通 2,000,000  │  未払金  200,000             │  │
│  │  売掛 1,500,000  │  計    1,000,000             │  │
│  │  計  4,000,000   │                              │  │
│  │                  │ 固定負債                     │  │
│  │ 固定資産         │  長期借入金 3,000,000        │  │
│  │  建物 5,000,000  │  計       3,000,000          │  │
│  │  備品 1,000,000  │                              │  │
│  │  計  6,000,000   │ 負債合計  4,000,000          │  │
│  │                  │                              │  │
│  │                  │ 純資産の部                   │  │
│  │                  │  資本金    5,000,000         │  │
│  │                  │  利益剰余金 1,000,000        │  │
│  │                  │ 純資産合計  6,000,000        │  │
│  │                  │                              │  │
│  │資産合計10,000,000│負債純資産合計10,000,000      │  │
│  └──────────────────┴──────────────────────────────┘  │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 8. 設定画面

### 8-1. 会計期間管理

**URL**: `/settings/fiscal-periods`

**説明**: 会計期間の作成、期締め処理

**レイアウト**:
```
┌─────────────────────────────────────────────────────────┐
│  会計期間管理                                            │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  [新規作成]                                              │
│                                                         │
│  ┌───────────────────────────────────────────────────┐  │
│  │期名      │開始日    │終了日    │状態  │操作      │  │
│  ├───────────────────────────────────────────────────┤  │
│  │2025年度  │2025-01-01│2025-12-31│開　  │[期締め]  │  │
│  │2024年度  │2024-01-01│2024-12-31│締済  │[再開]    │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**アクション**:
- **期締めボタン**: `POST /api/fiscal-periods/:id/close`、確認ダイアログ表示
- **再開ボタン**: `POST /api/fiscal-periods/:id/reopen`、確認ダイアログ表示

---

### 8-2. 会社設定

**URL**: `/settings/company`

**説明**: 会社情報の編集

**レイアウト**:
```
┌─────────────────────────────────────────────────────────┐
│  会社設定                                                │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  会社コード: [COMP001]                                  │
│  会社名: [株式会社サンプル]                             │
│  代表者: [山田太郎]                                      │
│  郵便番号: [100-0001]                                   │
│  住所: [東京都千代田区千代田1-1-1]                      │
│  電話番号: [03-1234-5678]                               │
│  設立日: [2020-01-01]                                   │
│                                                         │
│  [キャンセル]  [更新]                                    │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

### 8-3. ユーザー管理

**URL**: `/settings/users`

**説明**: 会社に所属するユーザーの管理、招待、役割変更

**レイアウト**:
```
┌─────────────────────────────────────────────────────────┐
│  ユーザー管理                                            │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  [ユーザー招待]                                          │
│                                                         │
│  ┌───────────────────────────────────────────────────┐  │
│  │ユーザー名  │メール          │役割      │操作      │  │
│  ├───────────────────────────────────────────────────┤  │
│  │山田太郎    │user@example.com│管理者    │[編][削]  │  │
│  │佐藤花子    │accountant@...  │経理担当  │[編][削]  │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**アクション**:
- **ユーザー招待ボタン**: モーダルダイアログでユーザーIDと役割を選択、`POST /api/companies/:id/users`
- **編集ボタン**: 役割を変更、`PUT /api/companies/:id/users/:userId`
- **削除ボタン**: 確認ダイアログ後、`DELETE /api/companies/:id/users/:userId`

---

## 変更履歴

| 日付 | バージョン | 変更内容 |
|------|-----------|---------|
| 2025-11-28 | 1.0 | 初版作成 |
