# チケット #012: 入金管理サービス

## ステータス
- [x] 完了

## 機能概要
入金のCRUD操作、請求書との紐付けを提供するサービスクラス。

## 実装ファイル
- [x] `service/PaymentService.java`
- [x] `dto/request/PaymentRequest.java`（新規作成）
- [x] `dto/response/PaymentResponse.java`（新規作成）

## 主要メソッド
- `List<PaymentResponse> findAll(Long companyId)` - 全件取得
- `PaymentResponse findById(Long id)` - ID検索
- `PaymentResponse create(Long companyId, PaymentRequest request)` - 作成
- `PaymentResponse update(Long id, PaymentRequest request)` - 更新
- `void delete(Long id)` - 削除
- `List<PaymentResponse> findByInvoiceId(Long invoiceId)` - 請求書別検索

## ビジネスルール
- 入金額は正の数
- 請求書IDが指定されている場合、請求書の存在確認
- 入金日の妥当性チェック
- 入金方法: BANK_TRANSFER、CASH、CREDIT_CARD、CHECK、OTHER

## 連携処理
- 入金登録時、関連する請求書のステータスを自動更新（検討）
  - 請求書の合計額 ≦ 入金累計額の場合、ステータスをPAIDに変更

## 依存関係
- PaymentRepository
- InvoiceRepository
- PartnerRepository
